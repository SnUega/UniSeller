# Оптимизации DotsPlane

## Проблема
- Было слишком много точек (100+ колонок)
- Анимация работала постоянно, даже когда не нужно
- Производительность страдала

## Решение

### 1. Правильное количество точек
- **60 колонок** × **38 строк** = 2,280 точек (было ~6,000+)
- Точки равномерно распределены по всей ширине экрана
- Spacing вычисляется динамически: `canvasWidth / (COLS - 1)`

### 2. Оптимизация анимации
**Анимация по требованию:**
- Анимация запускается только при движении курсора
- Останавливается автоматически когда все точки вернулись в базовое состояние
- Проверка `hasActiveAnimation` предотвращает лишние кадры

**Плавная интерполяция:**
- Используется lerp (linear interpolation) вместо прямого присвоения
- `lerpFactor = 0.15` обеспечивает плавность без тормозов
- Целевые значения (`targetSize`, `targetOpacity`) вычисляются отдельно

### 3. Canvas оптимизации
- DPR ограничен до 2 (`Math.min(devicePixelRatio, 2)`)
- Context options: `{ alpha: true, willReadFrequently: false }`
- Gradient создается для каждой точки (необходимо для эффекта)

### 4. Эффект курсора
- Радиус влияния: **100px** (был 120px)
- Квадратичная зависимость: `influence * influence`
- Максимальное увеличение: **6x** (было 8x)

## Результат
- ✅ Точно 60×38 сетка
- ✅ Плавная анимация без тормозов
- ✅ Эффект не "срывается" при медленном движении
- ✅ Анимация останавливается когда курсор неподвижен
- ✅ Отличная производительность даже на слабых устройствах

## Если всё равно тормозит

Уменьшите количество точек в `DotsPlane.vue`:
```javascript
const COLS = 50  // было 60
const ROWS = 32  // было 38
```

Или уменьшите радиус влияния:
```javascript
const maxDistance = 80  // было 100
```
